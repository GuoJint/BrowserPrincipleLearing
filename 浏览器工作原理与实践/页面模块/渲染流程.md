###  渲染流程
对应页面加载时最后一步的页面渲染

1. 构建 DOM 树
这是因为浏览器无法直接理解和使用 HTML，所以需要将 HTML 转换为浏览器能够理解的结构——DOM 树。

2. 样式计算
计算出 DOM 节点中每个元素的具体样式
	- 把 CSS 转换为浏览器能够理解的结构styleSheets
	- 转换样式表中的属性值，使其标准化
	- 计算出 DOM 树中每个节点的具体样式

3. 布局阶段
计算出 DOM 树中可见元素的几何位置，我们把这个计算过程叫做布局。
	- 创建布局树。遍历 DOM 树中的所有可见节点，并把这些节点加到布局树中；而不可见的节点会被布局树忽略掉
	- 布局计算。计算布局树节点的坐标位置

4. 分层
渲染引擎还需要为特定的节点生成专用的图层，并生成一棵对应的图层树（LayerTree）
浏览器的页面实际上被分成了很多图层，这些图层叠加后合成了最终的页面。
并不是布局树的每个节点都包含一个图层，如果一个节点没有对应的层，那么这个节点就从属于父节点的图层

分层条件：
	- 第一点，拥有层叠上下文属性的元素会被提升为单独的一层。
	- 第二点，需要剪裁（clip）的地方也会被创建为图层。

5. 图层绘制
在完成图层树的构建之后，渲染引擎会对图层树中的每个图层进行绘制

6. 栅格化（raster）操作
合成线程会将图层划分为图块
合成线程会按照视口附近的图块来优先生成位图，实际生成位图的操作是由栅格化来执行的。所谓栅格化，是指将图块转换为位图。

7. 合成和显示
一旦所有图块都被光栅化，合成线程就会生成一个绘制图块的命令——“DrawQuad”，然后将该命令提交给浏览器进程。
浏览器进程根据 DrawQuad 命令，将其页面内容绘制到内存中，最后再将内存显示在屏幕上。

首先渲染进程里执行图层合成(Layer Compositor)，也就是生成图层的操作，具体地讲，渲染进程的合成线程接收到图层的绘制消息时，会通过光栅化线程池将其提交给GPU进程，在GPU进程中执行光栅化操作，执行完成，再将结果返回给渲染进程的合成线程，执行合成图层操作！

2:合成的图层会被提交给浏览器进程，浏览器进程里会执行显示合成(Display Compositor)，也就是将所有的图层合成为可以显示的页面图片。 最终显示器显示的就是浏览器进程中合成的页面图片


渲染进程将 HTML 内容转换为能够读懂的 DOM 树结构。
渲染引擎将 CSS 样式表转化为浏览器可以理解的 styleSheets，计算出 DOM 节点的样式。
创建布局树，并计算元素的布局信息。
对布局树进行分层，并生成图层树。
为每个图层生成绘制列表，并将其提交到合成线程。
在合成线程当中将所有图层进行合成绘制并最后通过浏览器线程展示到页面中


合成线程将图层分成图块，并在光栅化线程池中将视口附近的图块优先生成位图。合成线程发送绘制图块命令 DrawQuad 给浏览器进程。浏览器进程根据 DrawQuad 消息生成页面，并显示到显示器上。


疑问：合成显示的过程。



